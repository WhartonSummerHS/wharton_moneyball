<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Module 5: Advanced Visualization with ggplot</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
div.sourceCode {
  overflow-x: visible;
}
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA19</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module1.html">Module 1</a>
    </li>
    <li>
      <a href="module2.html">Module 2</a>
    </li>
    <li>
      <a href="module3.html">Module 3</a>
    </li>
    <li>
      <a href="module4.html">Module 4</a>
    </li>
    <li>
      <a href="module5.html">Module 5</a>
    </li>
    <li>
      <a href="module6.html">Module 6</a>
    </li>
    <li>
      <a href="module7.html">Module 7</a>
    </li>
    <li>
      <a href="module8.html">Module 8</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
    <li>
      <a href="ps5.html">Problem Set 5</a>
    </li>
    <li>
      <a href="ps6.html">Problem Set 6</a>
    </li>
    <li>
      <a href="ps7.html">Problem Set 7</a>
    </li>
    <li>
      <a href="ps8.html">Problem Set 8</a>
    </li>
  </ul>
</li>
<li>
  <a href="project_info.html">
    <span class="fa fa-money"></span>
     
    Projects
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Module 5: Advanced Visualization with ggplot</h1>

</div>


<div id="recap" class="section level3">
<h3>Recap</h3>
<p>In this module, we dive into more advanced data visualization with the package <code>ggplot2</code>. The <code>gg</code> stands for “grammar of graphics”, a framework for data visualization. This framework separates the process of visualization into different components: data, aesthetic mappings, and geometric objects. These components are then added together (or layered) to produce the final graph.</p>
<p>We load the <code>tidyverse</code> package and the diving dataset from Lecture 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(tidyverse)
&gt;<span class="st"> </span>diving &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/diving.csv&quot;</span>)</code></pre></div>
<ol style="list-style-type: decimal">
<li>Data</li>
</ol>
<p>The first step is to tell <code>ggplot</code> what data you will be graphing. This is done using the call to <code>ggplot</code> below. We save our graph as <code>hist</code>, to which we will then <code>+</code> layers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)</code></pre></div>
<p><em>Note</em>: if you change your dataset, you need to do this step again.</p>
<ol start="2" style="list-style-type: decimal">
<li>Aesthetics (<code>aes</code>)</li>
</ol>
<p>Aesthetics map the data to the properties of the plot. Examples include:</p>
<ul>
<li><code>x</code>: the variable that will be on the x-axis</li>
<li><code>y</code>: the variable that will be on the y-axis</li>
<li><code>color</code>: the variable that categorizes data by color</li>
<li><code>shape</code>: the variable that categorizes data by shape</li>
</ul>
<p>You can define the <code>aes</code> in the <code>ggplot</code> call, which will then be used for all later layers, or you can define the <code>aes</code> in the <code>geom</code> (see below), which will only apply to that <code>geom</code>.</p>
<!-- We should show how to change color, shape, and size of points in scatterplots based on a factor. One way to do so would be with the nba_boxscore.csv file. We can plot the shooting percentages based on the player position. Could also compute average stats for each team.
Plot shooting percentages where we colour based on position and change the point size based on number of attempts 
-->
<ol start="3" style="list-style-type: decimal">
<li>Geometric Objects (<code>geoms</code>)</li>
</ol>
<p>Geometric objects, or <code>geoms</code>, determine the type of plot that will be created. Examples include:</p>
<ul>
<li><code>geom_point()</code>: creates a scatterplot</li>
<li><code>geom_histogram()</code>: creates a histogram</li>
<li><code>geom_line()</code>: creates a line</li>
<li><code>geom_boxplot()</code>: creates a boxplot</li>
</ul>
<p>Putting it all together:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> JScore), <span class="dt">binwidth =</span> <span class="fl">0.25</span>)</code></pre></div>
<p>We can then print the graph by seeing the output of <code>g</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can also add a layer to change the axis labels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Judge Score&quot;</span>)
&gt;<span class="st"> </span>hist</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="facets" class="section level3">
<h3>Facets</h3>
<p>What if we want to separate the judges’ scores by country? We can use <em>facets</em>. Facets allow you to separate graphs by category. We do not need to redo our above code for the histogram - we only need to add a <em>facet</em> layer to our graph <code>hist</code>. The first argument of <code>facet_wrap</code> is the column of our dataset that contains the category information. Note that we need a tilde (<code>~</code>) in front of <code>JCountry</code>: later in the course we will discuss why this is needed. The second argument of <code>facet_wrap</code> specifies the number of rows for which to display the graphs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>JCountry, <span class="dt">nrow =</span> <span class="dv">3</span>)
&gt;<span class="st"> </span>hist</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-6-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>Let’s plot the median diving score over the histograms by adding a <code>geom_vline</code>. This adds a vertical line (i.e. vline) to your plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>median_score &lt;-<span class="st"> </span><span class="kw">median</span>(diving[[<span class="st">&quot;JScore&quot;</span>]])
&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> median_score, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)
&gt;<span class="st"> </span>hist</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-7-1.png" width="960" style="display: block; margin: auto;" /></p>
<p><em>Note</em>: <code>color</code> is not in <code>aes</code> in the above code because it is a single value. In the next example, each category has a different color, so color is in <code>aes</code>.</p>
<p><strong>Exercise</strong></p>
<p>Create a histogram of the diving scores with your own choice of category for <code>facet_wrap</code> (i.e. not by country).</p>
</div>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>Boxplots are also an important visualization tool. We now create boxplots of the judges’ scores, separated by diving round. Here we use the <code>aes</code> property <code>fill = Round</code> to color (or “fill”) the boxplots by country.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>box &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)
&gt;<span class="st"> </span>box &lt;-<span class="st"> </span>box +<span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Round, <span class="dt">y =</span> JScore, <span class="dt">fill =</span> Round))
&gt;<span class="st"> </span>box &lt;-<span class="st"> </span>box +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Diving scores by round&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Judge Score&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Round&quot;</span>)
&gt;<span class="st"> </span>box</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can also remove the unnecessary x-axis ticks and labels as the legend on the right is sufficient. We do so using the <code>theme</code> layer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>box &lt;-<span class="st"> </span>box +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>())
&gt;<span class="st"> </span>box</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="barplots" class="section level3">
<h3>Barplots</h3>
<p>We can also create barplots using <code>geom_bar</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>bar &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)
&gt;<span class="st"> </span>bar &lt;-<span class="st"> </span>bar +<span class="st"> </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> JCountry, <span class="dt">fill =</span> JCountry))
&gt;<span class="st"> </span>bar &lt;-<span class="st"> </span>bar +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Judge Country&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Judge Country&quot;</span>)
&gt;<span class="st"> </span>bar</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-10-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="scatterplots" class="section level3">
<h3>Scatterplots</h3>
<p>Now let’s turn back to scatterplots, which were introduced in <a href="module2.html">Module 2</a>. We plot judges’ score versus rank of the diver. As we expect, the higher the divers’ rank, the higher their score.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)
&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span>scatter +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Rank, <span class="dt">y =</span> JScore, <span class="dt">color =</span> Country))
&gt;<span class="st"> </span>scatter</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="lines" class="section level3">
<h3>Lines</h3>
<p>We can also add an <code>abline</code> to our scatterplot - that is, a line where we specify the y-intercept (<code>intercept</code>) and the slope (<code>slope</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span>scatter +<span class="st"> </span><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="fl">8.1</span>, <span class="dt">slope =</span> -<span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)
&gt;<span class="st"> </span>scatter</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><em>Note</em>: <code>geom_abline</code> is different from <code>geom_line</code>: <code>geom_line</code> “connects the dots” between your data and so doesn’t have to be a straight line, whereas <code>geom_abline</code> draws a straight line with the specified slope and y-intercept.</p>
<p>Other <code>geom</code> for lines are: - <code>geom_vline</code>: to add a vertical line to a plot - <code>geom_hline</code>: to add a horizontal line to a plot</p>
</div>
<div id="stats" class="section level3">
<h3>Stats</h3>
<p>We can also specify a layer using <code>stat_</code>, which stands for statistical transformation. This is useful if we want to plot a summary statistic of our data, such as a mean or median. By using a <code>stat_</code> layer, we do not have to compute this summary statistic beforehand - <code>ggplot</code> will compute the summary statistic for us and then plot the result.</p>
<p>For example, suppose we want to plot the means of each judge’s score and provide error bars of one standard deviation on either side of the mean. We could use <code>summarize</code> and <code>group_by</code> to find the mean and standard deviations for each judge, <em>or</em> we could just use a <code>stat_</code> layer!</p>
<p>The layer <code>stat_summary()</code> computes and then plots a user-specified summary statistic. We choose the option <code>mean_se</code> to calculate the means and standard deviations of the scores of each judge.</p>
<p>As always, we set up the plot by calling <code>ggplot</code>, specifiying <code>data = diving</code> and then providing the <code>aes</code>. In this case, we want the judge on the <code>x</code>-axis and their scores on the <code>y</code>-axis. We then add out <code>stat_summary</code> layer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>judges &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving, <span class="kw">aes</span>(<span class="dt">x =</span> Judge, <span class="dt">y =</span> JScore))
&gt;<span class="st"> </span>judges &lt;-<span class="st"> </span>judges +<span class="st"> </span><span class="kw">stat_summary</span>(<span class="dt">fun.data =</span> mean_se)
&gt;<span class="st"> </span>judges &lt;-<span class="st"> </span>judges +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Judge Score&quot;</span>)
&gt;<span class="st"> </span>judges</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can see that the judges’ names are bunched together… ideally we would want their names to be horizontal to make it easier to read. Luckily, <code>ggplot</code> has an easy fix for this!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>judges &lt;-<span class="st"> </span>judges +<span class="st"> </span><span class="kw">coord_flip</span>()
&gt;<span class="st"> </span>judges</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="scales" class="section level3">
<h3>Scales</h3>
<p>Scales allow you to adjust the aesthetics or visual aspects of a plot. We return to the scatter plot of the judges’ scores vs rank of the divers. This time, we want to color the points by the difficulty of the dive.</p>
<p>We use the layer:</p>
<ul>
<li><code>scale_color_distiller</code></li>
</ul>
<p>Above, the second word, <code>color</code>, is the <code>aes</code> we want to change. We can replace it with <code>x</code>, <code>y</code> or <code>fill</code>, depending on the <code>aes</code> we want to change.</p>
<p>The third word is <code>distiller</code>, which we use because our <code>color</code> variable, <code>Difficulty</code>, is continuous. If it were discrete, we would write <code>brewer</code> instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)
&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span>scatter +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Rank, <span class="dt">y =</span> JScore, <span class="dt">color =</span> Difficulty))
&gt;<span class="st"> </span>scatter &lt;-<span class="st"> </span>scatter +<span class="st"> </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;OrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>)
&gt;<span class="st"> </span>scatter</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Interestingly, it seems that some of the highest ranked divers perform most of the less difficult dives, but perform these easy dives very well.</p>
<p>To further investigate, we plot a 2D histogram of Rank vs Difficulty.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> diving)
&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">geom_bin2d</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Rank, <span class="dt">y =</span> Difficulty))
&gt;<span class="st"> </span>hist &lt;-<span class="st"> </span>hist +<span class="st"> </span><span class="kw">scale_fill_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;Spectral&quot;</span>)
&gt;<span class="st"> </span>hist</code></pre></div>
<p><img src="module5_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Note that we use <code>fill</code> instead of <code>color</code> in <code>scale_fill_distiller</code> to control the fill of the histogram bins.</p>
<p>From the 2D histogram, we can see that the higher ranked divers attempt both more difficult and less difficult dives, unlike the lower ranked divers who only attempt more difficult dives.</p>
</div>
<div id="colorbrewer" class="section level3">
<h3>ColorBrewer</h3>
<p>The palettes used in this module, including “OrRd” and “Spectral”, come from <a href="http://colorbrewer2.org/">ColorBrewer</a>. You can take a look at the website and use some of these color palettes in your plots!</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
