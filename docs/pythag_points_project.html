<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Pythagorean Points in English Football</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA19</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module1.html">Module 1</a>
    </li>
    <li>
      <a href="module2.html">Module 2</a>
    </li>
    <li>
      <a href="module3.html">Module 3</a>
    </li>
    <li>
      <a href="module4.html">Module 4</a>
    </li>
    <li>
      <a href="module5.html">Module 5</a>
    </li>
    <li>
      <a href="module6.html">Module 6</a>
    </li>
    <li>
      <a href="module7.html">Module 7</a>
    </li>
    <li>
      <a href="module8.html">Module 8</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
    <li>
      <a href="ps5.html">Problem Set 5</a>
    </li>
    <li>
      <a href="ps6.html">Problem Set 6</a>
    </li>
    <li>
      <a href="ps7.html">Problem Set 7</a>
    </li>
    <li>
      <a href="ps8.html">Problem Set 8</a>
    </li>
  </ul>
</li>
<li>
  <a href="project_info.html">
    <span class="fa fa-money"></span>
     
    Projects
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Pythagorean Points in English Football</h1>

</div>


<div id="overview" class="section level2">
<h2>Overview</h2>
<p>Recall from <a href="ps1.html">Problem Set 1</a> the Pythagorean Expectation formula was introduced by Bill James to estimate how many games a baseball team is ``expected’’ to win, based on the number of runs they scored and the number of runs they give up. For sports like baseball, basketball, and American football, win-loss records determine playoff seedings. In low-scoring sports like soccer (i.e. the other football) and ice hockey, more important than the number of games won is the number of <em>points</em> scored. Since tie games (or “draws”) are not that unusual, each team is awarded 1 point in the event of a tie and 3 points are awarded to a winner. In this project, we will try to devise a Pythagorean-style formula for the number of points scored in English football.</p>
<p>We will use data from the 1950 season all the way up to the 2015 season. The file “data/english_football_train.csv” contains a random subset of 75% of the full dataset. We will use this data to train several different models to forecast the number of points each team has scored. The file “data/english_football_test.csv” contains the remaining 25% of the data, which we will use to assess each of the models. Finally, the file “data/english_football_full.csv” contains the full dataset. We will only use this dataset to present our final results.</p>
<p><strong>Exercise</strong> Load the training, testing, and full datasets into tbls names <code>england_train</code>, <code>england_test</code>, and <code>england_full</code>.</p>
</div>
<div id="some-simple-formulas" class="section level2">
<h2>Some simple formulas</h2>
<p>A naive attempt to get “Pythagorean Poitns” would be to take the Pythagorean expected win percentage, multiply it by the number of games (to get an ``expected number of games wons’’), and then multiply that by 3: <span class="math display">\[
\text{Pythag. Points} = \text{Pythag. Win Percentage} \times \text{num. games} \times 3
\]</span> where <span class="math display">\[
\text{Pythag. Win Percentage} = \frac{\text{GF}^{2}}{\text{GF}^{2} + \text{GA}^{2}}
\]</span></p>
<p><strong>Exercise</strong> Add a column to <code>england_train</code> and <code>england_test</code> containing the forecast points from this formula. Call this column “points_0”.</p>
<p>One problem with this formula is that not every match awards a total of 3 points. Whenever teams tie (draw), the total number of points that are allocated is 2 (one to each team). Instead of multiplying by 3 points per match, we ought to multiply by a average number of points allocated per game: <span class="math display">\[
\text{ppg} = 3 \times \frac{\text{Wins}}{\text{Num. Games}} + 2 \times \frac{\text{Draws}}{\text{Num. Games}}
\]</span> To compute the average number of points per game, we should use all of the data (contained in the tbl <code>england_full</code>).</p>
<p><strong>Exercise</strong> Add a column called “points_ppg” to <code>england_train</code> and <code>england_test</code> containing the new forecasts. Compute the training and testing RMSE for “points_ppg” and</p>
</div>
<div id="next-steps" class="section level2">
<h2>Next Steps:</h2>
<p>On balance, there’s no reason for us to use the exponent 2 in the Pythagorean Expectation formula. Using our updated Pythagorean points formula (that uses <code>ppg</code>), try a few different exponents ranging from 0.5 to 2. Find the best exponent using the training – testing paradigm for predicting the number of points scored.</p>
<p>You can also consider a linear model that tries to predict the number of points scored using the ratio <span class="math inline">\(\frac{\text{GF - GA}}{{\text{GF + GA}}.\)</span></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
