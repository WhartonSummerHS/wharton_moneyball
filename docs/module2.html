<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Module 2: Tabular Data and Basic Plots</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
div.sourceCode {
  overflow-x: visible;
}
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA19</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="module1.html">Module 1</a>
    </li>
    <li>
      <a href="module2.html">Module 2</a>
    </li>
    <li>
      <a href="module3.html">Module 3</a>
    </li>
    <li>
      <a href="module4.html">Module 4</a>
    </li>
    <li>
      <a href="module5.html">Module 5</a>
    </li>
    <li>
      <a href="module6.html">Module 6</a>
    </li>
    <li>
      <a href="module7.html">Module 7</a>
    </li>
    <li>
      <a href="module8.html">Module 8</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
    <li>
      <a href="ps5.html">Problem Set 5</a>
    </li>
    <li>
      <a href="ps6.html">Problem Set 6</a>
    </li>
    <li>
      <a href="ps7.html">Problem Set 7</a>
    </li>
    <li>
      <a href="ps8.html">Problem Set 8</a>
    </li>
  </ul>
</li>
<li>
  <a href="project_info.html">
    <span class="fa fa-money"></span>
     
    Projects
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Module 2: Tabular Data and Basic Plots</h1>

</div>


<div id="the-tidyverse" class="section level2">
<h2>The tidyverse</h2>
<p>So far we have seen only the most basic of R’s functionality. Arguable, one of the things that makes R so powerful is the ease with which users are able to define their own functions and release them to the public. As <a href="http://hadley.nz">Hadley Wickhamn</a> defines them, “[R] packages are fundamental units of reproducible code. They include reusable R functions, the documentation that describes how to use them, and sample data.” As of July 8, 2018, there are 12,725 packages available from the <a href="https://cran.r-project.org">Comprehensive R Archive Network</a>. The scope of these packages is vast: there are some designed for scraping data from the web, pre-processing data to get it into an analyzable format, performing standard and specialized statistical analyses, and to publish your results. People have also released packages tailored to very specific applications like analyzing baseball data. There are also some more whimsical packages, like one that allow you to display your favorite <a href="https://xkcd.com">XKCD</a> comic strip!</p>
<p>For the rest of the course, we will be working within the <a href="https://www.tidyverse.org/">``tidyverse’’</a>, which consists of several R packages for data manipulation, exploration, and visualization. They are all based on a common design philosophy, mostly developed by Hadley Wickham (whose name you will encounter a lot as you grain more experience with R). To load all of these packages, you can run the code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(tidyverse)</code></pre></div>
<p>When you do that, you’ll see a lot of output to the console, most of which you can safely ignore for now.</p>
</div>
<div id="tibbles" class="section level2">
<h2>Tibbles</h2>
<p>In <a href="module1.html">Module 1</a> and <a href="ps1.html">Problem Set 1</a>, we loaded tabular data into R by hand, creating a separate vector for each column. In order to associate each element of each vector with the particular player, we named the elements of the vectors in a consistent fashion. For instance, when working with the table of NBA data, we named the elements of the vectors so that that the first element of all of them contained Steph Curry’s data while the eigth element of all them contained Dirk Nowitzki’s data.</p>
<p>When we start to work with larger datasets that contain many more rows and columns than this simple example, storing each column as a vector and naming each element may prove rather annoying. Instead, we would like to load the data as a table.</p>
<!--The standard way to store and manipulate with tabular data in R is to use what is known as a **data frame**.-->
<p>Within the tidyverse, the standard way to store and manipulate tabular data is to use what is known as a tbl (pronounced “tibble”). At a high-level, a tbl is a two-dimensional array whose columns can be of different data types. That is, the first column might be characters (e.g. the names of athletes) and the second column can be numeric (e.g. the number of points scored).</p>
<p>We can go ahead and reload some of the data from the table in <a href="module1.html">Module 1</a> (luckily, this shouldn’t take that much time because you’ve already saved the code in a script!).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>players &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Stephen Curry&quot;</span>, <span class="st">&quot;John Wall&quot;</span>, <span class="st">&quot;Jimmy Butler&quot;</span>, <span class="st">&quot;James Harden&quot;</span>, <span class="st">&quot;Kevin Durant&quot;</span>, 
+<span class="st">     &quot;LeBron James&quot;</span>, <span class="st">&quot;Kristaps Porzingis&quot;</span>, <span class="st">&quot;Dirk Nowitzki&quot;</span>, <span class="st">&quot;Tim Duncan&quot;</span>, <span class="st">&quot;Andre Drummond&quot;</span>)
&gt;<span class="st"> </span>fga &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1597</span>, <span class="dv">1349</span>, <span class="dv">1034</span>, <span class="dv">1617</span>, <span class="dv">1381</span>, <span class="dv">1416</span>, <span class="dv">1112</span>, <span class="dv">886</span>, <span class="dv">442</span>, <span class="dv">1061</span>)
&gt;<span class="st"> </span>fgm &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">805</span>, <span class="dv">572</span>, <span class="dv">470</span>, <span class="dv">710</span>, <span class="dv">698</span>, <span class="dv">737</span>, <span class="dv">498</span>, <span class="dv">373</span>, <span class="dv">215</span>, <span class="dv">552</span>)
&gt;<span class="st"> </span>tpm &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">402</span>, <span class="dv">115</span>, <span class="dv">64</span>, <span class="dv">236</span>, <span class="dv">186</span>, <span class="dv">87</span>, <span class="dv">126</span>, <span class="dv">81</span>, <span class="dv">0</span>, <span class="dv">2</span>)
&gt;<span class="st"> </span>tpa &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">887</span>, <span class="dv">327</span>, <span class="dv">206</span>, <span class="dv">657</span>, <span class="dv">480</span>, <span class="dv">282</span>, <span class="dv">342</span>, <span class="dv">243</span>, <span class="dv">2</span>, <span class="dv">6</span>)
&gt;<span class="st"> </span>ftm &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">363</span>, <span class="dv">272</span>, <span class="dv">395</span>, <span class="dv">720</span>, <span class="dv">447</span>, <span class="dv">359</span>, <span class="dv">250</span>, <span class="dv">201</span>, <span class="dv">92</span>, <span class="dv">208</span>)
&gt;<span class="st"> </span>fta &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">400</span>, <span class="dv">344</span>, <span class="dv">475</span>, <span class="dv">837</span>, <span class="dv">498</span>, <span class="dv">491</span>, <span class="dv">280</span>, <span class="dv">240</span>, <span class="dv">131</span>, <span class="dv">586</span>)</code></pre></div>
<p>To create a tbl from a collection of vectors we can do the following</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>shooting_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(
+<span class="st">   </span><span class="dt">Player =</span> players,
+<span class="st">   </span><span class="dt">Position =</span> <span class="kw">c</span>(<span class="st">&quot;PG&quot;</span>, <span class="st">&quot;PG&quot;</span>, <span class="st">&quot;SG&quot;</span>, <span class="st">&quot;SG&quot;</span>, <span class="st">&quot;SF&quot;</span>, <span class="st">&quot;SF&quot;</span>, <span class="st">&quot;PF&quot;</span>, <span class="st">&quot;PF&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>),
+<span class="st">   </span><span class="dt">FGM =</span> fgm,
+<span class="st">   </span><span class="dt">FGA =</span> fga,
+<span class="st">   </span><span class="dt">FTM =</span> ftm,
+<span class="st">   </span><span class="dt">FTA =</span> fta,
+<span class="st">   </span><span class="dt">TPM =</span> tpm,
+<span class="st">   </span><span class="dt">TPA =</span> tpa
+<span class="st"> </span>)</code></pre></div>
<p>Before printing out our tbl, let’s unpack the code. First, we are using the function <code>tibble()</code> to create <code>shooting_data</code>. Within the parantheses, we have several expressions with equal signs. On the left-hand side of each equal sign, we have a character string and on the right-hand side we have a vector. The character string on the left-hand side of the equal sign designates the column names of our tbl while the entries in each column are containined in the vectors on the right-hand side of each equal sign. Notice that we have added a column for the player’s position.<br />
You’ll also notice that we have entered one expression per line. This is a common formatting and it makes it easy tell what is happening when we read it in an R script.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>shooting_data
<span class="co"># A tibble: 10 x 8</span>
   Player             Position   FGM   FGA   FTM   FTA   TPM   TPA
   &lt;chr&gt;<span class="st">              </span><span class="er">&lt;</span>chr&gt;<span class="st">    </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;
<span class="st"> </span><span class="dv">1</span> Stephen Curry      PG         <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">363</span>   <span class="dv">400</span>   <span class="dv">402</span>   <span class="dv">887</span>
 <span class="dv">2</span> John Wall          PG         <span class="dv">572</span>  <span class="dv">1349</span>   <span class="dv">272</span>   <span class="dv">344</span>   <span class="dv">115</span>   <span class="dv">327</span>
 <span class="dv">3</span> Jimmy Butler       SG         <span class="dv">470</span>  <span class="dv">1034</span>   <span class="dv">395</span>   <span class="dv">475</span>    <span class="dv">64</span>   <span class="dv">206</span>
 <span class="dv">4</span> James Harden       SG         <span class="dv">710</span>  <span class="dv">1617</span>   <span class="dv">720</span>   <span class="dv">837</span>   <span class="dv">236</span>   <span class="dv">657</span>
 <span class="dv">5</span> Kevin Durant       SF         <span class="dv">698</span>  <span class="dv">1381</span>   <span class="dv">447</span>   <span class="dv">498</span>   <span class="dv">186</span>   <span class="dv">480</span>
 <span class="dv">6</span> LeBron James       SF         <span class="dv">737</span>  <span class="dv">1416</span>   <span class="dv">359</span>   <span class="dv">491</span>    <span class="dv">87</span>   <span class="dv">282</span>
 <span class="dv">7</span> Kristaps Porzingis PF         <span class="dv">498</span>  <span class="dv">1112</span>   <span class="dv">250</span>   <span class="dv">280</span>   <span class="dv">126</span>   <span class="dv">342</span>
 <span class="dv">8</span> Dirk Nowitzki      PF         <span class="dv">373</span>   <span class="dv">886</span>   <span class="dv">201</span>   <span class="dv">240</span>    <span class="dv">81</span>   <span class="dv">243</span>
 <span class="dv">9</span> Tim Duncan         C          <span class="dv">215</span>   <span class="dv">442</span>    <span class="dv">92</span>   <span class="dv">131</span>     <span class="dv">0</span>     <span class="dv">2</span>
<span class="dv">10</span> Andre Drummond     C          <span class="dv">552</span>  <span class="dv">1061</span>   <span class="dv">208</span>   <span class="dv">586</span>     <span class="dv">2</span>     <span class="dv">6</span></code></pre></div>
<p>When we print our tbl, R outputs many things: the dimension (in this case, <span class="math inline">\(10 \times 7\)</span>), the column names, the <em>type</em> of data included in each column, and then the actual data. When we work with larger datasets and try to print out the tbl containing the data, it will only ever print the first ten rows of the dataset, in addition to the column names and column types.</p>
<div id="subsetting" class="section level3">
<h3>Subsetting</h3>
<p>Very rarely will we need to access a specific element in a tbl. In order to do so, we may use the double-bracket notation <code>[[]]</code>. Since a tbl contains two dimensions (rows and columns), we need to provide both the row index and the column indices for the element we want to subset between the brackets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>shooting_data[[<span class="dv">1</span>, <span class="dv">1</span>]]
[<span class="dv">1</span>] <span class="st">&quot;Stephen Curry&quot;</span>
&gt;<span class="st"> </span>shooting_data[[<span class="dv">5</span>, <span class="dv">3</span>]]
[<span class="dv">1</span>] <span class="dv">698</span></code></pre></div>
<p>In this course, we will almost never use the double bracket to extract elements from a tbl. More often than not, when we subset from a tbl, we will be pulling out individual columns. This can be done either by position or by name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>shooting_data[[<span class="dv">1</span>]]
 [<span class="dv">1</span>] <span class="st">&quot;Stephen Curry&quot;</span>      <span class="st">&quot;John Wall&quot;</span>          <span class="st">&quot;Jimmy Butler&quot;</span>      
 [<span class="dv">4</span>] <span class="st">&quot;James Harden&quot;</span>       <span class="st">&quot;Kevin Durant&quot;</span>       <span class="st">&quot;LeBron James&quot;</span>      
 [<span class="dv">7</span>] <span class="st">&quot;Kristaps Porzingis&quot;</span> <span class="st">&quot;Dirk Nowitzki&quot;</span>      <span class="st">&quot;Tim Duncan&quot;</span>        
[<span class="dv">10</span>] <span class="st">&quot;Andre Drummond&quot;</span>    
&gt;<span class="st"> </span>shooting_data[[<span class="st">&quot;FGM&quot;</span>]]
 [<span class="dv">1</span>] <span class="dv">805</span> <span class="dv">572</span> <span class="dv">470</span> <span class="dv">710</span> <span class="dv">698</span> <span class="dv">737</span> <span class="dv">498</span> <span class="dv">373</span> <span class="dv">215</span> <span class="dv">552</span></code></pre></div>
<p>We can further summarize individual columns of our tbl</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">summary</span>(shooting_data[[<span class="st">&quot;TPP&quot;</span>]])
Length  Class   Mode 
     <span class="dv">0</span>   <span class="ot">NULL</span>   <span class="ot">NULL</span> </code></pre></div>
</div>
</div>
<div id="reading-data-into-r" class="section level2">
<h2>Reading Data Into R</h2>
<p>Of course, for any dataset that is of sufficiently interesting size, we would <strong>never</strong> enter the data into R directly. Instead, we often have to read it in from a file. We are going to dive right into an analysis of NBA shooting statistics for all players between the 1996-97 season and the 2015-16 season. The data is currently stored on your computer in a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">comma-separated</a> files (which have extension ‘.csv’). We will need to load this into R before working with it.</p>
<p>Within the tidyverse, we can use the function <code>read_csv()</code> to read in a csv file that is stored on your computer and create a tibble containing all of the data. Our NBA shooting data is contained in a csv file named “nba_shooting.csv” in the “data” folder of our working directory. To read it into R with <code>read_csv()</code> we need to specify the path to the file like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>nba_shooting &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/nba_shooting.csv&quot;</span>)
Parsed with column specification:
<span class="kw">cols</span>(
  <span class="dt">PLAYER =</span> <span class="kw">col_character</span>(),
  <span class="dt">SEASON =</span> <span class="kw">col_integer</span>(),
  <span class="dt">FGM =</span> <span class="kw">col_integer</span>(),
  <span class="dt">FGA =</span> <span class="kw">col_integer</span>(),
  <span class="dt">TPM =</span> <span class="kw">col_integer</span>(),
  <span class="dt">TPA =</span> <span class="kw">col_integer</span>(),
  <span class="dt">FTM =</span> <span class="kw">col_integer</span>(),
  <span class="dt">FTA =</span> <span class="kw">col_integer</span>(),
  <span class="dt">FGP =</span> <span class="kw">col_double</span>(),
  <span class="dt">TPP =</span> <span class="kw">col_double</span>(),
  <span class="dt">FTP =</span> <span class="kw">col_double</span>()
)
&gt;<span class="st"> </span>nba_shooting
<span class="co"># A tibble: 7,447 x 11</span>
   PLAYER      SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP
   &lt;chr&gt;<span class="st">        </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>int&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;<span class="st"> </span><span class="er">&lt;</span>dbl&gt;
<span class="st"> </span><span class="dv">1</span> Stephen Cu…   <span class="dv">2016</span>   <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">402</span>   <span class="dv">887</span>   <span class="dv">363</span>   <span class="dv">400</span> <span class="fl">0.504</span> <span class="fl">0.453</span> <span class="fl">0.908</span>
 <span class="dv">2</span> James Hard…   <span class="dv">2016</span>   <span class="dv">710</span>  <span class="dv">1617</span>   <span class="dv">236</span>   <span class="dv">657</span>   <span class="dv">720</span>   <span class="dv">837</span> <span class="fl">0.439</span> <span class="fl">0.359</span> <span class="fl">0.860</span>
 <span class="dv">3</span> Kevin Dura…   <span class="dv">2016</span>   <span class="dv">698</span>  <span class="dv">1381</span>   <span class="dv">186</span>   <span class="dv">480</span>   <span class="dv">447</span>   <span class="dv">498</span> <span class="fl">0.505</span> <span class="fl">0.388</span> <span class="fl">0.898</span>
 <span class="dv">4</span> DeMarcus C…   <span class="dv">2016</span>   <span class="dv">601</span>  <span class="dv">1332</span>    <span class="dv">70</span>   <span class="dv">210</span>   <span class="dv">476</span>   <span class="dv">663</span> <span class="fl">0.451</span> <span class="fl">0.333</span> <span class="fl">0.718</span>
 <span class="dv">5</span> LeBron Jam…   <span class="dv">2016</span>   <span class="dv">737</span>  <span class="dv">1416</span>    <span class="dv">87</span>   <span class="dv">282</span>   <span class="dv">359</span>   <span class="dv">491</span> <span class="fl">0.520</span> <span class="fl">0.309</span> <span class="fl">0.731</span>
 <span class="dv">6</span> Damian Lil…   <span class="dv">2016</span>   <span class="dv">618</span>  <span class="dv">1474</span>   <span class="dv">229</span>   <span class="dv">610</span>   <span class="dv">414</span>   <span class="dv">464</span> <span class="fl">0.419</span> <span class="fl">0.375</span> <span class="fl">0.892</span>
 <span class="dv">7</span> Anthony Da…   <span class="dv">2016</span>   <span class="dv">560</span>  <span class="dv">1137</span>    <span class="dv">35</span>   <span class="dv">108</span>   <span class="dv">326</span>   <span class="dv">430</span> <span class="fl">0.493</span> <span class="fl">0.324</span> <span class="fl">0.758</span>
 <span class="dv">8</span> Russell We…   <span class="dv">2016</span>   <span class="dv">656</span>  <span class="dv">1444</span>   <span class="dv">101</span>   <span class="dv">341</span>   <span class="dv">465</span>   <span class="dv">573</span> <span class="fl">0.454</span> <span class="fl">0.296</span> <span class="fl">0.812</span>
 <span class="dv">9</span> DeMar DeRo…   <span class="dv">2016</span>   <span class="dv">614</span>  <span class="dv">1377</span>    <span class="dv">47</span>   <span class="dv">139</span>   <span class="dv">555</span>   <span class="dv">653</span> <span class="fl">0.446</span> <span class="fl">0.338</span> <span class="fl">0.850</span>
<span class="dv">10</span> Paul George   <span class="dv">2016</span>   <span class="dv">605</span>  <span class="dv">1448</span>   <span class="dv">210</span>   <span class="dv">565</span>   <span class="dv">454</span>   <span class="dv">528</span> <span class="fl">0.418</span> <span class="fl">0.372</span> <span class="fl">0.860</span>
<span class="co"># … with 7,437 more rows</span></code></pre></div>
<p>Observe that <code>nba_shooting</code> is a tibble with 7,447 rows and 11 columns. We see further that it includes columns for field goal percentage, free throw percentage, and three point percentage.</p>
</div>
<div id="visualization" class="section level2">
<h2>Visualization</h2>
<p>We will use visualization to answer some questions about the data. Specifically, we will study the distribution of the individual columns as well as try to understand the relationship between pairs of variables. For instance, is a player’s free throw percentage predictive of his three point percentage?</p>
<p>To produce graphics throughout this course, we will use ggplot2, which is a package contained in the tidyverse. At a very high level, ggplot2 works by layering graphics, adding different features one on top of another. You can learn much much more about ggplot2 <a href="https://ggplot2.tidyverse.org">here</a>. We will cover some of the more advanced functionality of ggplot2 in <a href="module5.html">Module 5</a></p>
<div id="histograms" class="section level3">
<h3>Histograms</h3>
<p>As you saw in Prof. Wyner’s lectures, histograms are a powerful way to describe a single dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP), <span class="dt">bins =</span> <span class="dv">5</span>)</code></pre></div>
<p><img src="module2_files/figure-html/fgp-histogram-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The first bit of the code above, <code>ggplot(data = nba_shooting)</code> tells R to create a coordinate system to which can add additional layers. It also tells R that the data to be plotted is coming from the tibble <code>nba_shooting</code>. The next part of the code, <code>+ geom_histogram(mapping = aes(FGP), bins = 5)</code> tells R to <em>add</em> a layer to the blank plot, in this case a histogram of field goal percentage that uses 5 bins. The first argument is the mapping, which defines how each variable in our dataset is mapped to visual components of the graph (the <em>aesthetics</em>) In the case of a histogram, we really only need to tell R that the variable we want to visualize goes on the horizontal (x) axis. To improve readability, we have divided the code to produce the historgram over two lines. <strong>It is very important when using ggplot to have the + sign at the end of the line.</strong></p>
<p>In the code above, we also told R how many bins into which to divide the data. We can vary the number of bins to get a higher-resolution view of our data. For instance, we can use 50 bins: <img src="module2_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Instead of specifying the number of bins, which can sometimes be difficult, we could instead specify the width of the bins. For instance, we could split our data into bins of width 0.05 as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP), <span class="dt">binwidth =</span> <span class="fl">0.05</span>)</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It is often preferable to use a density histogram instead of a frequency histogram. This is because the areas of the density histogram boxes always sums to 1 no matter how much data you have.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP, <span class="dt">y =</span> ..density..), 
+<span class="st">     </span><span class="dt">bins =</span> <span class="dv">50</span>)</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /> Visually, the histograms look identical but now the vertical (y) axis has a different scale.</p>
<p><strong>Exercise</strong> Make histograms of FGA, FTA, TPA, FTP, and TPP. Comment on the differences</p>
</div>
<div id="visualizing-bivariate-data" class="section level3">
<h3>Visualizing bivariate data</h3>
<p>While examining one variable (i.e. column of our data table) is useful, we are often more interested in understanding the relationships between multiple variables. For instance, how do you think a player’s free throw percentage (FTP) is related to his field goal percentage (FGP)?</p>
<p>To make a scatterplot in R, we can run the following code. Notice that it is very similar to the code used to make histograms, but with a few important differences</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP, <span class="dt">y =</span> FTP))</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Just like the code used to produce the histograms above, we began by calling <code>ggplot(data = nba_shooting)</code>. Now, however, instead of calling <code>geom_histogram()</code> we are calling <code>geom_point()</code>. This tells R that instead of a histogram, we want to plot the data using points. We will learn much more about the different `<code>geom'' objects available in ggplot2 in Lecture 4.  Since we are plotting multiple variables, we need to tell R to which axis each variable is mapped. This is exactly what</code>mapping = aes(x = FGP, y = FTP)` does.</p>
<p>Immediately, we notice a few things about the figure. First, we see what appears to be a big black cloud of points in the middle of the plotting region. This is a result of R trying to plot lots and lots of data points in a small region of the plane. Additionally, we find a few rather interesting data points, corresponding to players who have never made a field goal but are perfect free throw shooters and to players who have never missed a field goal but have made only 50% of their free throws. A major drawback of this scatterplot is its inability to show the relative density of points. That is, does the point at (1.00, 0.50) correspond to a single player or does it correspond to multiple ones?</p>
<p>One way to address this is to use <em>alpha-blending</em> to change the transparency of each point. When there are many points plotted in the same region, that region will appear darker.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP, <span class="dt">y =</span> FTP), <span class="dt">alpha =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="module2_files/figure-html/scatterplot-alpha-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we can start to distinguish the number of players represented by each point. The fact that the point at (0.00, 0.50) is much darker than the point at (0.00, 1.00) indicates that there are more players who missed every one of their field goal attempts and made 50% of their free throws than players who missed every field goal but made every free throw.</p>
<p>To get an even better idea, we can make a <em>heatmap</em>, which you can think of as a two-dimensional analog of a histogram. To form a heatmap, you start by dividing the plane into lots of evenly-sized two-dimensional bins and counting the number of datapoints within each bin. You then color the bin according to the count. While you can conceptually make the bins any shape you want, there are two popular conventions: rectangular binning and hexagonal binning. For the purposes of this course, we will focus on rectangular binning, using the <code>geom_bin2d()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_bin2d</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGP, <span class="dt">y =</span> FTP))</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can increase the number of bins to get a much more high-resolution view of our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_bin2d</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGP, <span class="dt">y =</span> FTP), <span class="dt">bins =</span> <span class="dv">100</span>)</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we are starting to get some sense that there are some outliers in our data. We can confirm this visually in another way</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> FGA, <span class="dt">y =</span> FGP), <span class="dt">alpha =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Sometimes, we don’t want to look at the entire range of the data and only want to plot a smaller window. We can do this by changing the x and y limits of the plotting region</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> nba_shooting) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGA, <span class="dt">y =</span> FGP)) +<span class="st"> </span><span class="kw">xlim</span>(<span class="dv">0</span>, <span class="dv">200</span>)
Warning:<span class="st"> </span>Removed <span class="dv">5346</span> rows containing missing <span class="kw">values</span> (geom_point).</code></pre></div>
<p><img src="module2_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="thinking-ahead-for-tomorrow" class="section level2">
<h2>Thinking Ahead for Tomorrow</h2>
<p>There were a number of players who had very few field goal attempts, free throw attempts, and/or three point attempts. We will eventually like to drop them from our analysis. In the next lecture, we will begin to explore how to manipulate and transform our <code>nba_shooting</code> object.</p>
<!--

First, there are a few points at rather odd locations.
For instance, it appears that there are players in the dataset who have never made a field goal but are perfect free throw shooters! 
It also appears that there are players who have never missed a field goal attempt but are only 50% free throw shooters.
What is going on??

Additionally, we see that in the middle of the plot there is a bit black cloud of points.
This results whenever we try to plot many, many datapoint in the same small region of the plane.
This highlights a drawback of such a simple scatterplot: we cannot easily get a sense of the density of points.



What are some things you notice immediately with the figures?

The big black cloud in the middle: this occurs when you plot lots and lots of point in roughly the same spot.

One drawback with such a simple scatterplot is that we cannot easily get a sense of the density of points.
We know there are loads of them in the middle. 
But how many players are there with FGP = 1 and FTP = 0.5? 

**Changing the point size is a useful thing to do. We can also trivailly change the color**


Let's look at the graph in a bit more detail.
First, we see that there's a massive black ``cloud'' of points in the middle.

**alpha blending is a simple way of dealing with this problem. It makes each point slightly transparent so that the more points plotted in a region, the darker it will be.**

Another way to deal with this is to use rectangular or hexagonal binning.


```r
> ggplot(data = nba_shooting) + geom_bin2d(aes(x = FGP, y = FTP))
```

<img src="module2_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;" />

```r
> ggplot(data = nba_shooting) + geom_hex(aes(x = FGP, y = FTP))
Warning: Computation failed in `stat_binhex()`:
Package `hexbin` required for `stat_binhex`.
Please install and try again.
```

<img src="module2_files/figure-html/unnamed-chunk-10-2.png" width="672" style="display: block; margin: auto;" />

What is R doing in this case?
It is dividing the plane into lots of regular hexagonal regions, counting the number of data points that fall inside 

Just like with histograms, we can change the number of bins








Also, there are a couple of really interesting players.
Let's hold off on examining them


This tells R 

For instance, is there a relationship between a player's free throw percentage (FTP) and his field goal percentage (FGP)? 
What about between free throw percentage and three point percentage?



-- Is a player's free throw percentage predictive of his three point percentage?
-- Is a player's field goal percentage predictive of his free throw percentage?
-->
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
